' ÷¡“‘' ====' ¡N OPEN-SOURCE TOOL FOR DRAWING 640X400 VECTOR ART ON THE MEGA65#OUTPUT "VART"' MENU SYSTEM' +------+--------+-----+------+----------+---------+------+------+------+-----+' ! LINE ! CIRCLE ! BOX ! POLY ! (X) FILL ! PALETTE ! LOAD ! SAVE ! UNDO ! REDO!' +------+--------+-----+------+----------+---------+------+------+------+-----+' X = EXIT' ? = SHOW/HIDE MENU' CTRL+1-8 = SELECT FROM 1ST 8 COLOURS' MEGA+1-8 = SELECT FROM 2ND 8 COLOURS' CTRL+D = CHOOSE FROM DEFAULT PALETTE' CTRL+A = CHOOSE FROM ALTERNATE PALETTE.DECLARES'--------#DECLARE KEY$#DECLARE K,A$#DECLARE X%, Y%, W%, H%, X2%, Y2%#DECLARE MX%, MY%, MB%, MBØOLD%#DECLARE MENUØSELECTION = -1#DECLARE RET%#DECLARE LINEØSTATE%, LX0%, LY0%#DECLARE CIRCLEØSTATE%, CX0%, CY0%, RADIUS%#DECLARE BOXØSTATE%, BX0%, BY0%#STRUCT ¬’‘‘œŒ X%, Y%, W%, H%, TYPE%, STATE%, TEXT$#DEFINE ‘Ÿ–≈ØŒœ“Õ¡Ã = 0#DEFINE ‘Ÿ–≈Ø‘œ««Ã≈ = 1#DEFINE Õ¡ÿØ¬‘Œ = 5#DEFINE Ã…Œ≈   = 0#DEFINE √…“√Ã≈ = 1#DEFINE ¬œÿ    = 2#DEFINE ∆…ÃÃ   = 3#DEFINE ≈ÿ…‘   = 4¬’‘‘œŒ BTNS(Õ¡ÿØ¬‘Œ) = [     _  [ 0,  0, 6, 3, ‘Ÿ–≈ØŒœ“Õ¡Ã, 0, "LINE" ],   _  [ 6,  0, 8, 3, ‘Ÿ–≈ØŒœ“Õ¡Ã, 0, "CIRCLE" ], _  [ 14, 0, 5, 3, ‘Ÿ–≈ØŒœ“Õ¡Ã, 0, "BOX" ],    _  [ 19, 0, 6, 3, ‘Ÿ–≈Ø‘œ««Ã≈, 0, "FILL" ],   _  [ 25, 0, 6, 3, ‘Ÿ–≈ØŒœ“Õ¡Ã, 0, "EXIT" ]    _] .MAIN'----  GOSUB INIT     GOSUB DRAWØMENUØSYSTEM  GOSUB CHECKØINPUT  GOSUB ENDER  END.INIT'----  SCREEN 0,640,400,4  FOR K = 0 TO 62    READ X%    POKE $0600+K, X%  NEXT K  MOUSE ON, 1  SPRITE 0,1,1  RETURN#DEFINE √»“Ø»≈…«»‘ = 2#DEFINE √»“Ø◊…ƒ‘» = 1#DEFINE √»“Øƒ…“Ø’– = 1#DEFINE √»“Øƒ…“Ø“…«»‘ = 2#DEFINE √»“Øƒ…“Øƒœ◊Œ = 4#DEFINE √»“Øƒ…“ØÃ≈∆‘ = 8.CLEARØMENU'----------  FOR K=0 TO 7    EDMA 3, 640*2, 0, $40000+K*$4000  NEXT K  RETURN.DRAWØMENUØSYSTEM'----------------  GOSUB CLEARØMENU  PEN 0,1  ' DRAW ITEMS  FOR K = 0 TO Õ¡ÿØ¬‘Œ-1    X%=BTNSØX%(K)    Y%=BTNSØY%(K)    W%=(X% + BTNSØW%(K))    H%=(Y% + BTNSØH%(K))    PEN 0, 1    IF MENUØSELECTION=K AND BTNSØTYPE%(K) <> ‘Ÿ–≈Ø‘œ««Ã≈ THEN BEGIN      BOX X%*8, Y%*8, W%*8, H%*8, 1      PEN 0, 0    BEND:ELSE BEGIN      BOX X%*8, Y%*8, W%*8, H%*8      IF BTNSØTYPE%(K) = ‘Ÿ–≈Ø‘œ««Ã≈ AND BTNSØSTATE%(K)<>0 THEN BEGIN        PEN 0,3        BOX X%*8, Y%*8, W%*8, H%*8, 1        PEN 0,0      BEND    BEND    CHAR X%+1, Y%*8+4, √»“Ø»≈…«»‘, √»“Ø◊…ƒ‘», √»“Øƒ…“Ø“…«»‘, BTNSØTEXT$(K)    PEN 0, 1  NEXT K  RETURN.ONØCLICKØLINE'-------------  IF LINEØSTATE% = 0 THEN LX0%=MX%:LY0%=MY%:LINEØSTATE%=1:DOT MX%,MY%:RETURN  IF LINEØSTATE% = 1 THEN BEGIN    LINE LX0%, LY0%, MX%, MY%    LINEØSTATE% = 0  BEND  RETURN.ONØCLICKØCIRCLE'---------------  IF CIRCLEØSTATE% = 0 THEN CX0%=MX%:CY0%=MY%:CIRCLEØSTATE%=1:RETURN  IF CIRCLEØSTATE% = 1 THEN BEGIN    RADIUS% = SQR( (MX%-CX0%)^2 + (MY%-CY0%)^2 )    CIRCLE CX0%, CY0%, RADIUS%, BTNSØSTATE%(∆…ÃÃ)    CIRCLEØSTATE% = 0  BEND  RETURN.ONØCLICKØBOX'------------  IF BOXØSTATE% = 0 THEN BX0%=MX%:BY0%=MY%:BOXØSTATE%=1:RETURN  IF BOXØSTATE% = 1 THEN BEGIN    BOX BX0%, BY0%, MX%, MY%, BTNSØSTATE%(∆…ÃÃ)    BOXØSTATE% = 0  BEND  RETURN.ONØCLICKØFILL'-------------  BTNSØSTATE%(∆…ÃÃ) = ABS(NOT BTNSØSTATE%(∆…ÃÃ))  GOSUB DRAWØMENUØSYSTEM  RETURN.CHECKØACTIONØCLICK'------------------  IF MENUØSELECTION = Ã…Œ≈ THEN GOSUB ONØCLICKØLINE  IF MENUØSELECTION = √…“√Ã≈ THEN GOSUB ONØCLICKØCIRCLE  IF MENUØSELECTION = ¬œÿ THEN GOSUB ONØCLICKØBOX  RETURN.CHECKØCOLOURØKEYPRESS'---------------------  IF A$=CHR$(144) THEN PEN 0,0:SPRITE 0,1,0  IF A$=CHR$(5) THEN PEN 0,1:SPRITE 0,1,1  IF A$=CHR$(28) THEN PEN 0,2:SPRITE 0,1,2  IF A$=CHR$(159) THEN PEN 0,3:SPRITE 0,1,3  IF A$=CHR$(156) THEN PEN 0,4:SPRITE 0,1,4  IF A$=CHR$(30) THEN PEN 0,5:SPRITE 0,1,5  IF A$=CHR$(31) THEN PEN 0,6:SPRITE 0,1,6  IF A$=CHR$(158) THEN PEN 0,7:SPRITE 0,1,7  IF A$=CHR$(129) THEN PEN 0,8:SPRITE 0,1,8  IF A$=CHR$(149) THEN PEN 0,9:SPRITE 0,1,9  IF A$=CHR$(150) THEN PEN 0,10:SPRITE 0,1,10  IF A$=CHR$(151) THEN PEN 0,11:SPRITE 0,1,11  IF A$=CHR$(152) THEN PEN 0,12:SPRITE 0,1,12  IF A$=CHR$(153) THEN PEN 0,13:SPRITE 0,1,13  IF A$=CHR$(154) THEN PEN 0,14:SPRITE 0,1,14  IF A$=CHR$(155) THEN PEN 0,15:SPRITE 0,1,15  RETURN.CHECKØINPUT'-----------  GET A$  IF A$="X" THEN RETURN  GOSUB CHECKØCOLOURØKEYPRESS  RMOUSE MX%, MY%, MB%  MX%=(MX%-24)*2  MY%=(MY%-50)*2  IF MB%=128 AND MBØOLD%=0 THEN BEGIN    MBØOLD%=128    GOSUB CHECKØBUTTONØHIT        IF RET%=1 THEN BEGIN      IF MENUØSELECTION = ≈ÿ…‘ THEN SCREEN CLOSE:END      IF MENUØSELECTION = ∆…ÃÃ THEN GOSUB ONØCLICKØFILL    BEND:ELSE BEGIN      GOSUB CHECKØACTIONØCLICK    BEND  BEND  IF MBØOLD%=128 AND MB%=0 THEN MBØOLD% = 0  'DEBUG STUFF  'A$ = STR$(MX%) + ", " + STR$(MY%) + ", " + STR$(MB%)  'PEN 0, 0  'BOX 0, 64, 150, 80, 1  'PEN 0, 1  'CHAR 0, 64, √»“Ø»≈…«»‘, √»“Ø◊…ƒ‘», √»“Øƒ…“Ø“…«»‘, A$  GOTO CHECKØINPUT.CHECKØBUTTONØHIT'----------------  RET%=0  FOR K = 0 TO Õ¡ÿØ¬‘Œ-1    X%=BTNSØX%(K)*8    Y%=BTNSØY%(K)*8    W%=BTNSØW%(K)*8    H%=BTNSØH%(K)*8    X2%=X%+W%    Y2%=Y%+H%    IF X%<=MX% AND MX%<=X2% AND Y%<=MY% AND MY%<=Y2% THEN BEGIN      MENUØSELECTION = K      RET%=1      GOSUB DRAWØMENUØSYSTEM      K=Õ¡ÿØ¬‘Œ-1    BEND  NEXT K  RETURN  .ENDER'-----  SCREEN CLOSE  MOUSE OFF  RETURN.DATA'MOUSE POINTERDATA %11111111, %00000000, %00000000DATA %11111110, %00000000, %00000000DATA %11111100, %00000000, %00000000DATA %11111000, %00000000, %00000000DATA %11111100, %00000000, %00000000DATA %11101110, %00000000, %00000000DATA %11000111, %00000000, %00000000DATA %10000011, %10000000, %00000000DATA %00000001, %11000000, %00000000DATA %00000000, %11100000, %00000000DATA %00000000, %01110000, %00000000DATA %00000000, %00111000, %00000000DATA %00000000, %00011100, %00000000DATA %00000000, %00001110, %00000000DATA %00000000, %00000111, %00000000DATA %00000000, %00000011, %10000000DATA %00000000, %00000001, %00000000DATA %00000000, %00000000, %00000000DATA %00000000, %00000000, %00000000DATA %00000000, %00000000, %00000000DATA %00000000, %00000000, %00000000